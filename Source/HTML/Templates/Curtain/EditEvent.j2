{% extends "Header.j2" %}
{% block body %}
	<script>
		var AreaEvent = {};
		AreaEvent.Edit = {};
		AreaEvent.Edit.Modal = {};
		AreaEvent.Edit.Modal.Inputs = {};
		AreaEvent.Edit.Modal.Inputs.DATETIME = undefined;
		AreaEvent.Edit.Modal.Inputs.PERCENTAGE_RANGE = undefined;
		AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT = undefined;

		AreaEvent.Edit.Modal.update_percentage_input = undefined;
		AreaEvent.Edit.Modal.update_percentage_range = undefined;
	</script>

	<title>
		Edit Event
	</title>

	<div>
		<form method="POST">
			<div class="input-group mb-3">
				<span class="input-group-text" id="basic-addon1">Event Position</span>

				<div
				  class="input-group-text"
				  style="width: 70%;"
				>
					<input
					  type="range"
					  class="form-range"
					  min="0"
					  max="100"
					  step="1"
					  value="{{ event["percentage"] }}"
					  id="AreaEvent.Edit.Modal-percentage_range-input"
					  name="AreaEvent.Edit.Modal-percentage_range-input"
					  onchange="AreaEvent.Edit.Modal.update_percentage_input(this);"
					>
				</div>
				<input
				  type="number"
				  class="form-control"
				  min="0"
				  max="100"
				  step="1"
				  value="{{ event["percentage"] }}"
				  id="AreaEvent.Edit.Modal-percentage_input-input"
				  onchange="AreaEvent.Edit.Modal.update_percentage_range(this);"
				>
			</div>
			<div
			  class="input-group mb-3"
			>
				<span
				  class="input-group-text"
				>
					Select Time
				</span>
				<input
				  id="AreaEvent.Edit.Modal-datetime-input"
				  name="AreaEvent.Edit.Modal-datetime-input"
				  value="{{ event["time"] }}"
				  type="datetime-local"
				  aria-label="Date"
				  class="form-control"
				>
			</div>
			<button>
				Update
			</button>
		</form>
	</div>

	<script>
		AreaEvent.Edit.Modal.Inputs.DATETIME = document.getElementById("AreaEvent.Edit.Modal-datetime-input");
		AreaEvent.Edit.Modal.Inputs.PERCENTAGE_RANGE = document.getElementById("AreaEvent.Edit.Modal-percentage_range-input");
		AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT = document.getElementById("AreaEvent.Edit.Modal-percentage_input-input");


		AreaEvent.Edit.Modal.update_percentage_range = function update_percentage_range(input)
		{
			AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value = Math.floor(AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value);
			if(AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value > 100)
			{
				AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value = 100;
			}
			if(AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value < 0)
			{
				AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value = 0;
			}
			AreaEvent.Edit.Modal.Inputs.PERCENTAGE_RANGE.value = AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value;
		}


		AreaEvent.Edit.Modal.update_percentage_input = function update_percentage_input(range)
		{
			AreaEvent.Edit.Modal.Inputs.PERCENTAGE_INPUT.value = AreaEvent.Edit.Modal.Inputs.PERCENTAGE_RANGE.value;
		}
	</script>
{% endblock %}
